<!DOCTYPE html>
<html style="font-size: 16px;" lang="it">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="Dashboard">
  <meta name="description" content="">
  <meta name="page_type" content="np-template-header-footer-from-plugin">
  <meta content="Tisifea" property="og:title" />
  <meta content="Sito WEB per la creazione Schede PG e Missioni da usare con il BOT Il Maggiordomo" property="og:description" />
  <meta content="https://tisifea.duckdns.org/" property="og:url" />
  <meta content="https://tisifea.duckdns.org/images/stemma_gilda_f.png" property="og:image" />
  <meta content="#43B581" data-react-helmet="true" name="theme-color" />
  <title>Dashboard</title>
  <link rel="icon" type="image/jpg" href="images/Logo_bot.jpg">
  <link rel="stylesheet" href="../css/nicepage.css" media="screen">
  <link rel="stylesheet" href="../css/Dashboard-Missioni.css" media="screen">
  <link rel="stylesheet" href="../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../fonts/font-awesome-4.7.0/css/font-awesome.min.css">
  <script class="u-script" type="text/javascript" src="../js/jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="../js/nicepage.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="../js/copy_clipboard.js"></script>
  <meta name="generator" content="Nicepage 3.16.0, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
  <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "",
      "url": "/",
      "logo": "/images/stemma_gilda_f.png"
  }</script>
  <meta property="og:title" content="Dashboard">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#478ac9">
  <link rel="canonical" href="/">
  <meta property="og:url" content="index.hbs">
</head>

<body class="u-body">
  {{> header }}

  <section class="u-align-center u-clearfix u-image u-section-1" id="sec-5507" data-image-width="400"
    data-image-height="265">
    <div class="u-clearfix u-sheet u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1">
      <div class="u-container-style u-expanded-width u-group u-radius-25 u-shape-round u-white u-group-1">
        <div class="u-container-layout u-container-layout-1" style="padding: 30px 0px;">
          <h1 class="u-align-center u-text u-text-1">Lista Missioni</h1>
          <form action="/missions/new" method="POST">
            <div class="u-align-center u-form-group u-form-submit" style="padding-left: 30px; padding-right: 30px;">
              <button type="submit" class="custom_button_bis">Crea Missione<br>
                </a>
              </button>
            </div>
          </form>
          <div class="u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-list u-list-1">
            <div id="root_div_list" class="u-repeater u-repeater-1" style="align-content: start;">
              {{#if list_mission}}
              <script>
                const root_element = document.getElementById('root_div_list');
                function cancell_create(id_missione, nome_missione) {
                  var tempplate = `<div id="alert_cancell">
                                      <div id="alert_cancell_are">
                                          <div  class="wrap-contact150">
                                              <span class="contact100-form-title">
                                                  Sei sicuro di volere cancellare La Missione?
                                              </span>
                                              <P>Questa azione non può essere annullata. Questo cancellerà definitivamente la Missione <b>${nome_missione}</b>\nSi prega di digitare <b>${nome_missione}</b> per confermare.</P><br>
                                              <form method="POST" action="/missions/delete" style="dispaly= block; felx-wrap: wrap;">
                                                  <div class="wrap-input100">
                                                      <input style="width: 0px;height 0px; visibility: hidden;" type="hidden" id="id_scheda_delete" name="id_scheda_delete" value="${id_missione}">
                                                      <input style="width: 0px;height 0px; visibility: hidden;" type="hidden" id="nome_delete" name="nome_delete" value="${nome_missione}">
                                                      <input id="Input_delete" style="border: none;" class="u-border-2 u-border-grey-30 u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-white" type="text" id="check_delete" name="check_delete" placeholder="Inserire Id Missone">
                                                  </div>
                                                  <div class="container-contact100-form-btn">
                                                      <div class="wrap-contact100-form-btn">
                                                      <div class="contact100-form-bgbtn"></div>
                                                          <button id="btn_sub" class="custom_button_del_bis" submit="submit" >
                                                              <span>
                                                                  Elimina
                                                              </span>
                                                          </button>                                                
                                                      </div>
                                                  </div>
                                              </form>
                                              <div  class="container-contact120-form-btn">
                                                  <div class="wrap-contact120-form-btn">
                                                      <div class="contact120-form-bgbtn"></div>
                                                      <button id="btn_cancel" class="custom_button_bis" onclick="cancell_destroy()">
                                                          <span>
                                                              Annulla
                                                          </span>
                                                      </button>    
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  </div>`;
                  root_element.insertAdjacentHTML('afterend', tempplate);
                  document.getElementById('Input_delete').focus();
                }
                function cancell_destroy() {
                  var element = document.getElementById('alert_cancell');
                  element.remove();
                }
                var max = "{{list_mission}}";
                var id_missione_temp = "{{id_missione}}";
                var missione_temp = "{{nome_missione}}";
                var missione_avatar_temp = "{{avatar_mission}}";
                var missione_body_temp = "{{body_missione}}";
                var missione_exspire_temp = "{{exspire_mission}}";
                var missione_player_temp = "{{player_missione}}";
                var id_missione = id_missione_temp.split(",");
                var name_missione = missione_temp.split(",");
                var missione_body = missione_body_temp.split("%new%,");
                var avatar_name_missione = missione_avatar_temp.split(",");
                var missione_exspire = missione_exspire_temp.split(",");
                var missione_player = missione_player_temp.split(",");
                for (let index = 0; index < max; index++) {
                  var list_missioni = `
                    <div id="missione_${index}" class="u-border-2 u-border-grey-75 u-container-style u-list-item u-radius-20 u-repeater-item u-shape-round">
                      <div class="u-container-layout u-similar-container u-valign-top-xl u-container-layout-2">
                        <div
                          class="u-container-style u-expanded-width-lg u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-group u-group-2">
                          <div class="u-container-layout u-container-layout-3">
                            <img class="u-image u-image-round u-radius-10 u-image-1" src="${avatar_name_missione[index]}" alt=""
                              data-image-width="400" data-image-height="265">
                            <h2 class="u-text u-text-2">${name_missione[index]}</h2>
                            <p class="u-text u-text-default-xl u-text-3">${missione_body[index]}</p>
                            <form method="POST" action="/missions/edit" class="u-from-1">
                              <input style="width: 0px;height 0px; visibility: hidden;" type="hidden" id="id_missione_edit" name="id_missione_edit" value="${id_missione[index]}">
                              <button
                                class="custom_button u-align-right u-border-2 u-btn u-btn-round u-button-style u-radius-50 u-btn-2 type="submit"" type>Visualizza
                              </button>
                            </form>
                            
                            <button 
                              class="custom_button_del u-align-right u-border-3 u-btn u-btn-round u-button-style u-radius-50 u-btn-3" type="submit" onclick='cancell_create("${id_missione[index]}","${name_missione[index]}")'>Elimina</button>
                            <h6 class="u-text u-text-4">Scadenza: ${missione_exspire[index]}</h6>
                            <h6 class="u-text u-text-default-xl u-text-5">Players Iscritti: ${missione_player[index]}</h6>
                          </div>
                        </div>
                      </div>
                    </div>`;
                  root_element.insertAdjacentHTML('beforeend', list_missioni);
                }
              </script>
              {{/if}}

            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </section>

  {{> footer }}
</body>

</html>